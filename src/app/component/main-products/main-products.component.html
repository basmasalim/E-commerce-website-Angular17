<div class="row g-3">
  @for (product of productList; track product._id) {
  <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6">
    <figure class="product p-3">
      <div class="overflow-hidden position-relative cr">
        <img
          [src]="product.imageCover"
          [alt]="product.title"
          class="w-100"
          [routerLink]="['/details', product._id]"
        />
        <button class="btn-main text-uppercase w-100 fw-semibold font-sm">
          add to cart
        </button>
      </div>
      <figcaption>
        <div
          class="product-header d-flex justify-content-between align-items-center py-2"
        >
          <span class="font-md">{{ stockStatuses[$index] }}</span>
          <span>
            <i class="fa-regular fa-heart cr"></i>
          </span>
        </div>
        <div class="product-body pt-3">
          <h6
            class="text-uppercase cr"
            [routerLink]="['/details', product._id]"
          >
            {{ product.title.split(" ", 2).join(" ") }}
          </h6>
          <span class="text-muted font-sm">{{ product.category.name }}</span>

          <div class="d-flex justify-content-between align-items-center">
            <span class="font-md">EG{{ product.price }}</span>

            <div>
              <!-- Full stars -->
              @for (star of [1,2,3,4,5].slice(0, product.ratingsAverage); track
              $index) {
              <span>
                <i class="fas fa-star rating-color fa-2xs"></i>
              </span>
              }
              <!-- Half star -->
              @if (product.ratingsAverage % 1 !== 0) {
              <i class="fa-solid fa-star-half-stroke rating-color fa-2xs"></i>
              }
              <!-- Empty stars -->
              @for (star of [1,2,3,4,5].slice(0, 5 - product.ratingsAverage);
              track $index) {
              <span>
                <i class="fa-regular fa-star rating-color fa-2xs"></i>
              </span>
              }
            </div>
          </div>
        </div>
      </figcaption>
    </figure>
  </div>
  }
</div>
